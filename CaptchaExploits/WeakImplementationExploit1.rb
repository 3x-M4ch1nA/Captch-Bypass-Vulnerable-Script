# Lang: Ruby

require "net/http"
require "uri"
#We set up a proxy in order to debug the code in case if it does not work
PROXY = "127.0.0.1"
PROXY_PORT = "8080"

#Here, enter the end point which you want to target
theurl = 'http://127.0.0.1/captcha/Google/weakcaptcha1.php'

uri = URI.parse(theurl)
	req = Net::HTTP::Post.new(uri.path)
	#We add the required HTTP headers to make the valid request
	req.add_field("Content-Type", "application/x-www-form-urlencoded")
	req.body = "g-recaptcha-response=InvalidAnswerOfCAPTCHA&submit=SUBMIT"
	#The HTTP request is being made
		res = Net::HTTP::Proxy(PROXY, PROXY_PORT).start(uri.host, uri.port) do |http| 
			http.request(req)
		end
	puts "We are making the HTTP request to crack the CAPTCHA...."
	puts "-------------------------------------------------------"
	puts req.body
	puts "-------------------------------------------------------"
	puts "The response is...."
	puts "-------------------------------------------------------"
	puts res.body.to_s
	puts "-------------------------------------------------------"